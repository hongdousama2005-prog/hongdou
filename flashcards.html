<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 1 ËØçÊ±áÈó™Âç°Â≠¶‰π†Á≥ªÁªü - ÂÆåÊï¥Áâà</title>
    <style>
        :root { --primary: #1a237e; --secondary: #4caf50; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background-color: var(--bg); display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        h1 { color: var(--primary); margin: 10px 0; font-size: clamp(18px, 3vw, 24px); }
        .progress { color: #666; margin-bottom: 15px; font-size: clamp(14px, 2.2vw, 18px); }
        .flashcard-container { width: min(90%, 550px); height: min(65vh, 420px); perspective: 1000px; cursor: pointer; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); transform-style: preserve-3d; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border-radius: 20px; }
        .flashcard-container.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 20px; border: 5px solid white; padding: 18px; box-sizing: border-box; display: flex; flex-direction: column; justify-content: center; }
        .card-front { background: linear-gradient(135deg, #64b5f6, #1e88e5); color: white; align-items: center; }
        .card-front h2 { font-size: clamp(32px, 8vw, 56px); margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .card-back { background: white; color: #333; transform: rotateY(180deg); text-align: left; overflow-y: auto; }
        .phonetic { color: #d32f2f; font-size: clamp(14px, 2.6vw, 22px); margin: 6px 0; font-family: 'Arial'; }
        .meaning { font-size: clamp(16px, 2.6vw, 20px); color: #1a237e; font-weight: bold; margin-bottom: 10px; }
        .example { margin-top: 12px; padding: 10px; background: #f9f9f9; border-left: 4px solid #1e88e5; font-style: italic; color: #555; line-height: 1.6; font-size: clamp(14px, 2.2vw, 16px); }
        .example-zh { margin-top: 6px; padding: 8px 10px; background: #f0f7ff; border-left: 4px solid #4caf50; color: #2c5f2d; line-height: 1.6; font-size: clamp(13px, 2vw, 15px); font-style: normal; }
        .controls { margin-top: 20px; display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
        button { padding: 10px 18px; font-size: clamp(14px, 2.2vw, 16px); border: none; border-radius: 50px; cursor: pointer; background: var(--primary); color: white; font-weight: bold; transition: 0.15s; }
        button:hover { opacity: 0.92; transform: translateY(-2px); }
        .btn-speak { background: #ff9800; }
        .hint { font-size: 12px; margin-top: 12px; opacity: 0.8; }
    </style>
</head>
<body>

    <h1>Unit 1 Ê†∏ÂøÉËØçÊ±áÂ≠¶‰π†</h1>
    <div class="progress" id="progressText">1 / 52</div>

    <div class="flashcard-container" onclick="flipCard()">
        <div class="card-inner" id="cardInner">
            <div class="card-face card-front">
                <h2 id="frontText">Word</h2>
                <div class="hint">ÁÇπÂáªÂç°ÁâáÊü•ÁúãÈáä‰πâ (Á©∫Ê†ºÈîÆÁøªËΩ¨)</div>
            </div>
            <div class="card-face card-back" id="backText"></div>
        </div>
    </div>

    <div class="controls">
        <button onclick="prevCard(event)">‚óÄ ‰∏ä‰∏ÄÂº†</button>
        <button class="btn-speak" onclick="speakWord(event)">üîä ÂèëÈü≥ (En)</button>
        <button onclick="nextCard(event)">‰∏ã‰∏ÄÂº† ‚ñ∂</button>
    </div>

    <script>
        // ÂÆåÊï¥ÂΩïÂÖ• 52 ‰∏™ÂçïËØçÊï∞ÊçÆÔºàÂê´‰æãÂè•‰∏≠ÊñáÁøªËØëÔºâ
        const flashcards = [
            {f: "fox", b: "n. ÁãêÁã∏ /f…íks/", ex: "The quick brown fox is a common character in stories.", exZh: "ËÅ™ÊòéÁöÑÁãêÁã∏ÊòØÊïÖ‰∫ã‰∏≠Â∏∏ËßÅÁöÑËßíËâ≤„ÄÇ"},
            {f: "giraffe", b: "n. ÈïøÈ¢àÈπø /d í…ô'r…ëÀêf/", ex: "The giraffe has a very long neck.", exZh: "ÈïøÈ¢àÈπøÊúâ‰∏ÄÊù°ÂæàÈïøÁöÑËÑñÂ≠ê„ÄÇ"},
            {f: "eagle", b: "n. Èπ∞ /'iÀêgl/", ex: "The eagle is flying high in the sky.", exZh: "Èπ∞Âú®Â§©Á©∫‰∏≠È´òÈ£û„ÄÇ"},
            {f: "wolf (pl. wolves)", b: "n. Áãº /w älf/", ex: "We could hear the wolves howling at night.", exZh: "Êàë‰ª¨ÂèØ‰ª•Âê¨Âà∞ÁãºÂú®Â§úÈó¥ÁöÑÂöéÂè´„ÄÇ"},
            {f: "penguin", b: "n. ‰ºÅÈπÖ /'pe≈ãgw…™n/", ex: "Penguins are great swimmers.", exZh: "‰ºÅÈπÖÊòØÂæàÂ•ΩÁöÑÊ∏∏Ê≥≥ËÄÖ„ÄÇ"},
            {f: "care", b: "n. ÁÖßÈ°æÔºõÊä§ÁêÜ v. ÂÖ≥ÂøÉ /ke…ô(r)/", ex: "The nurse provides excellent care.", exZh: "Êä§Â£´Êèê‰æõ‰ºòÁßÄÁöÑÊä§ÁêÜ„ÄÇ"},
            {f: "take care of", b: "ÁÖßÈ°æÔºõÂ§ÑÁêÜ", ex: "Please take care of my dog.", exZh: "ËØ∑ÁÖßÈ°æÊàëÁöÑÁãó„ÄÇ"},
            {f: "sandwich", b: "n. ‰∏âÊòéÊ≤ª /'s√¶nw…™d í/", ex: "I had a chicken sandwich for lunch.", exZh: "ÊàëÂçàÈ§êÂêÉ‰∫Ü‰∏Ä‰∏™È∏°ËÇâ‰∏âÊòéÊ≤ª„ÄÇ"},
            {f: "snake", b: "n. Ëõá /sne…™k/", ex: "The snake is sliding through the grass.", exZh: "ËõáÂú®ËçâÂú∞ÈáåÊªëË°å„ÄÇ"},
            {f: "scary", b: "adj. Âêì‰∫∫ÁöÑ /'ske…ôri/", ex: "That was a very scary movie.", exZh: "ÈÇ£ÊòØ‰∏ÄÈÉ®ÈùûÂ∏∏Âêì‰∫∫ÁöÑÁîµÂΩ±„ÄÇ"},
            {f: "neck", b: "n. ËÑñÂ≠ê /nek/", ex: "A giraffe has a very long neck.", exZh: "ÈïøÈ¢àÈπøÊúâ‰∏ÄÊù°ÈùûÂ∏∏ÈïøÁöÑËÑñÂ≠ê„ÄÇ"},
            {f: "guess", b: "v. Áåú n. ÁåúÊµã /ges/", ex: "Can you guess what is in the box?", exZh: "‰Ω†ËÉΩÁåúÂá∫ÁõíÂ≠êÈáåÊúâ‰ªÄ‰πàÂêóÔºü"},
            {f: "shark", b: "n. È≤®È±º / É…ëÀêk/", ex: "The shark is a dangerous fish.", exZh: "È≤®È±ºÊòØÂç±Èô©ÁöÑÈ±ºÁ±ª„ÄÇ"},
            {f: "whale", b: "n. È≤∏ /we…™l/", ex: "The blue whale is the largest animal.", exZh: "ËìùÈ≤∏ÊòØÊúÄÂ§ßÁöÑÂä®Áâ©„ÄÇ"},
            {f: "huge", b: "adj. Â∑®Â§ßÁöÑ /hjuÀêd í/", ex: "An elephant is a huge animal.", exZh: "Â§ßË±°ÊòØ‰∏ÄÁßçÂ∑®Â§ßÁöÑÂä®Áâ©„ÄÇ"},
            {f: "dangerous", b: "adj. Âç±Èô©ÁöÑ /'de…™nd í…ôr…ôs/", ex: "It is dangerous to play with fire.", exZh: "Áé©ÁÅ´ÊòØÂç±Èô©ÁöÑ„ÄÇ"},
            {f: "save", b: "v. ÊïëÔºõÂÇ®ËìÑ /se…™v/", ex: "The firefighter's job is to save people.", exZh: "Ê∂àÈò≤ÂëòÁöÑÂ∑•‰ΩúÊòØÊïë‰∫∫„ÄÇ"},
            {f: "luck", b: "n. Âπ∏Ëøê /l åk/", ex: "Good luck with your exam!", exZh: "Á•ù‰Ω†ËÄÉËØïÂ•ΩËøêÔºÅ"},
            {f: "Thai", b: "adj. Ê≥∞ÂõΩÁöÑ n. Ê≥∞ÂõΩ‰∫∫ /ta…™/", ex: "I love to eat Thai food.", exZh: "ÊàëÂñúÊ¨¢ÂêÉÊ≥∞ÂõΩËèú„ÄÇ"},
            {f: "trunk", b: "n. Ë±°Èºª /tr å≈ãk/", ex: "An elephant uses its trunk to drink.", exZh: "Â§ßË±°Áî®Ë±°ÈºªÂñùÊ∞¥„ÄÇ"},
            {f: "pick", b: "v. Êç°ÔºõÊëò /p…™k/", ex: "Don't pick the flowers in the park.", exZh: "‰∏çË¶ÅÊëòÂÖ¨Âõ≠ÈáåÁöÑËä±„ÄÇ"},
            {f: "pick up", b: "Êç°Ëµ∑ÔºõÊãøËµ∑", ex: "Please pick up the trash.", exZh: "ËØ∑Êç°Ëµ∑ÂûÉÂúæ„ÄÇ"},
            {f: "carry", b: "v. ÊãøÔºõÊèê /'k√¶ri/", ex: "Can you help me carry this box?", exZh: "‰Ω†ËÉΩÂ∏ÆÊàëÊãøËøô‰∏™ÁõíÂ≠êÂêóÔºü"},
            {f: "playful", b: "adj. Áà±Â¨âÊàèÁöÑ /'ple…™fl/", ex: "The little kitten is very playful.", exZh: "Â∞èÁå´Âí™ÈùûÂ∏∏Áà±Â¨âÊàè„ÄÇ"},
            {f: "swimmer", b: "n. Ê∏∏Ê≥≥ËÄÖ /'sw…™m…ô(r)/", ex: "She is a very good swimmer.", exZh: "Â•πÊòØ‰∏Ä‰ΩçÂæàÂ•ΩÁöÑÊ∏∏Ê≥≥ËÄÖ„ÄÇ"},
            {f: "one another", b: "‰∫íÁõ∏", ex: "We should always help one another.", exZh: "Êàë‰ª¨Â∫îËØ•‰∫íÁõ∏Â∏ÆÂä©„ÄÇ"},
            {f: "look after", b: "ÁÖßÈ°æ", ex: "My grandmother looks after me.", exZh: "ÊàëÁöÑÁ•ñÊØçÁÖßÈ°æÊàë„ÄÇ"},
            {f: "culture", b: "n. ÊñáÂåñ /'k ålt É…ô(r)/", ex: "China has a rich culture.", exZh: "‰∏≠ÂõΩÊúâ‰∏∞ÂØåÁöÑÊñáÂåñ„ÄÇ"},
            {f: "however", b: "adv. ÁÑ∂ËÄå /ha ä'ev…ô(r)/", ex: "He is tired. However, he keeps working.", exZh: "‰ªñÂæàÁ¥Ø„ÄÇÁÑ∂ËÄåÔºå‰ªñÁªßÁª≠Â∑•‰Ωú„ÄÇ"},
            {f: "danger", b: "n. Âç±Èô© /'de…™nd í…ô(r)/", ex: "The sign on the box says 'Danger'.", exZh: "ÁõíÂ≠ê‰∏äÁöÑÊ†áÂøóÂÜôÁùÄ'Âç±Èô©'„ÄÇ"},
            {f: "in danger", b: "Â§Ñ‰∫éÂç±Èô©‰πã‰∏≠", ex: "The bird is in danger because of the cat.", exZh: "ËøôÂè™È∏üÂõ†‰∏∫Áå´ËÄåÂ§Ñ‰∫éÂç±Èô©‰πã‰∏≠„ÄÇ"},
            {f: "forest", b: "n. Ê£ÆÊûó /'f…ír…™st/", ex: "Many animals live in the forest.", exZh: "ËÆ∏Â§öÂä®Áâ©‰ΩèÂú®Ê£ÆÊûóÈáå„ÄÇ"},
            {f: "cut down", b: "Á†çÂÄíÔºõÂáèÂ∞ë", ex: "They are cutting down old trees.", exZh: "‰ªñ‰ª¨Âú®Á†çÂÄíËÄÅÊ†ë„ÄÇ"},
            {f: "too many", b: "Â§™Â§ö", ex: "There are too many people on the bus.", exZh: "ÂÖ¨ÂÖ±Ê±ΩËΩ¶‰∏äÁöÑ‰∫∫Â§™Â§ö‰∫Ü„ÄÇ"},
            {f: "kill", b: "v. ÊùÄÊ≠ª /k…™l/", ex: "It is wrong to kill wild animals.", exZh: "ÊùÄÊ≠ªÈáéÁîüÂä®Áâ©ÊòØÈîôËØØÁöÑ„ÄÇ"},
            {f: "made of", b: "Áî±‚Ä¶‚Ä¶Âà∂Êàê", ex: "This desk is made of wood.", exZh: "ËøôÂº†Ê°åÂ≠êÊòØÁî±Êú®Â§¥Âà∂ÊàêÁöÑ„ÄÇ"},
            {f: "ivory", b: "n. Ë±°Áâô /'a…™v…ôri/", ex: "It is illegal to buy and sell ivory.", exZh: "‰π∞ÂçñË±°ÁâôÊòØËøùÊ≥ïÁöÑ„ÄÇ"},
            {f: "friendly", b: "adj. ÂèãÂ•ΩÁöÑ /'frendli/", ex: "My neighbor is a very friendly person.", exZh: "ÊàëÁöÑÈÇªÂ±ÖÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÂèãÂ•ΩÁöÑ‰∫∫„ÄÇ"},
            {f: "quiet", b: "adj. Áõ∏ÂΩìÔºõÂÆåÂÖ® /kwa…™t/", ex: "The movie was quite good.", exZh: "ËøôÈÉ®ÁîµÂΩ±Áõ∏ÂΩì‰∏çÈîô„ÄÇ"},
            {f: "quite a", b: "Áõ∏ÂΩìÔºõÈùûÂ∏∏", ex: "That's quite a surprise!", exZh: "ÈÇ£ÁúüÊòØ‰∏Ä‰∏™‰∏çÂ∞èÁöÑÊÉäÂñúÔºÅ"},
            {f: "not ... at all", b: "‰∏ÄÁÇπ‰πü‰∏ç", ex: "I'm not tired at all.", exZh: "Êàë‰∏ÄÁÇπ‰πü‰∏çÁ¥Ø„ÄÇ"},
            {f: "fur", b: "n. ËΩØÊØõ /f…úÀê(r)/", ex: "My cat has soft white fur.", exZh: "ÊàëÁöÑÁå´ÊúâÊüîËΩØÁöÑÁôΩÊØõ„ÄÇ"},
            {f: "blind", b: "adj. ÁûéÁöÑ /bla…™nd/", ex: "He has been blind since he was born.", exZh: "‰ªñ‰ªéÂá∫ÁîüËµ∑Â∞±Â§±Êòé‰∫Ü„ÄÇ"},
            {f: "hearing", b: "n. Âê¨Âäõ /'h…™…ôr…™≈ã/", ex: "Dogs have very good hearing.", exZh: "ÁãóÁöÑÂê¨ÂäõÂæàÂ•Ω„ÄÇ"},
            {f: "Antarctica", b: "n. ÂçóÊûÅÊ¥≤ /√¶n't…ëÀêkt…™k…ô/", ex: "Penguins live in Antarctica.", exZh: "‰ºÅÈπÖ‰ΩèÂú®ÂçóÊûÅÊ¥≤„ÄÇ"},
            {f: "Africa", b: "n. ÈùûÊ¥≤ /'√¶fr…™k…ô/", ex: "Lions and elephants live in Africa.", exZh: "ÁãÆÂ≠êÂíåÂ§ßË±°‰ΩèÂú®ÈùûÊ¥≤„ÄÇ"},
            {f: "Thailand", b: "n. Ê≥∞ÂõΩ /'ta…™l√¶nd/", ex: "Bangkok is the capital of Thailand.", exZh: "ÊõºË∞∑ÊòØÊ≥∞ÂõΩÁöÑÈ¶ñÈÉΩ„ÄÇ"},
            {f: "rule", b: "n. ËßÑÂàô /ruÀêl/", ex: "We must obey the traffic rules.", exZh: "Êàë‰ª¨ÂøÖÈ°ªÈÅµÂÆà‰∫§ÈÄöËßÑÂàô„ÄÇ"},
            {f: "order", b: "n. Áß©Â∫è v. ÁÇπËèú /'…îÀêd…ô(r)/", ex: "Are you ready to order?", exZh: "‰Ω†ÂáÜÂ§áÂ•ΩÁÇπËèú‰∫ÜÂêóÔºü"},
            {f: "point", b: "v. ÊåáÂêë /p…î…™nt/", ex: "It's rude to point at people.", exZh: "ÊåáÂêëÂà´‰∫∫ÊòØ‰∏çÁ§ºË≤åÁöÑ„ÄÇ"},
            {f: "follow", b: "v. ÈÅµÂæ™ /'f…íl…ô ä/", ex: "Follow your teacher's advice.", exZh: "Âê¨Âèñ‰Ω†ËÄÅÂ∏àÁöÑÂª∫ËÆÆ„ÄÇ"},
            {f: "late for", b: "ËøüÂà∞", ex: "Hurry up, or you will be late for school.", exZh: "Âø´ÁÇπÔºåÂê¶Âàô‰Ω†‰ºöËøüÂà∞‰∏äÂ≠¶„ÄÇ"}
        ];

        // support receiving review list from parent via postMessage (embedded iframe)
        let reviewList = null;
        let currentFlashcards = flashcards;
        let currentIndex = 0;

        function applyReviewList(list) {
            if (!Array.isArray(list) || list.length === 0) return false;
            const normalized = list.map(s => String(s).toLowerCase());
            const filtered = flashcards.filter(c => normalized.some(w => c.f.toLowerCase().startsWith(w) || c.f.toLowerCase() === w));
            if (filtered.length > 0) {
                currentFlashcards = filtered;
                currentIndex = 0;
                updateCard();
                return true;
            }
            return false;
        }

        // Try to get review list from parent iframe via postMessage.
        // If no parent response, fallback to localStorage value.
        let receivedFromParent = false;
        window.addEventListener('message', (ev) => {
            try {
                const msg = ev.data;
                if (msg && msg.type === 'flashcardReviewData' && msg.payload && Array.isArray(msg.payload.review)) {
                    receivedFromParent = true;
                    reviewList = msg.payload.review;
                    applyReviewList(reviewList);
                    // cleanup localStorage copy if present
                    try { localStorage.removeItem('flashcardReview'); } catch (e) {}
                }
            } catch (e) { /* ignore */ }
        });

        // If inside iframe, request data from parent
        try {
            if (window.parent && window.parent !== window) {
                window.parent.postMessage('requestFlashcardReview', '*');
            }
        } catch (e) {}

        // fallback: after short delay, use localStorage if parent didn't respond
        setTimeout(() => {
            if (receivedFromParent) return;
            const reviewRaw = (() => { try { return localStorage.getItem('flashcardReview'); } catch(e) { return null; } })();
            if (reviewRaw) {
                try { reviewList = JSON.parse(reviewRaw); } catch(e) { reviewList = null; }
            }
            if (applyReviewList(reviewList)) {
                try { localStorage.removeItem('flashcardReview'); } catch(e) {}
            } else {
                // keep full list
                currentFlashcards = flashcards;
            }
        }, 250);

        function flipCard() { document.getElementById('cardInner').parentElement.classList.toggle('is-flipped'); }

        function updateCard() {
            const container = document.querySelector('.flashcard-container');
            container.classList.remove('is-flipped');
            setTimeout(() => {
                const card = currentFlashcards[currentIndex];
                document.getElementById('frontText').innerText = card.f;
                let html = `<div class="meaning">${card.b}</div>`;
                if (card.ex) {
                    html += `<div class="example">${card.ex}</div>`;
                }
                if (card.exZh) {
                    html += `<div class="example-zh">${card.exZh}</div>`;
                }
                document.getElementById('backText').innerHTML = html;
                document.getElementById('progressText').innerText = `${currentIndex + 1} / ${currentFlashcards.length}`;
            }, 150);
        }

        function nextCard(e) { e.stopPropagation(); currentIndex = (currentIndex + 1) % currentFlashcards.length; updateCard(); }
        function prevCard(e) { e.stopPropagation(); currentIndex = (currentIndex - 1 + currentFlashcards.length) % currentFlashcards.length; updateCard(); }
        function speakWord(e) { 
            e.stopPropagation(); 
            const word = currentFlashcards[currentIndex].f.split('(')[0];
            const msg = new SpeechSynthesisUtterance(word);
            msg.lang = 'en-US';
            window.speechSynthesis.speak(msg);
        }

        document.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowRight') nextCard(e);
            if(e.key === 'ArrowLeft') prevCard(e);
            if(e.key === ' ') flipCard();
        });

        updateCard();
    </script>
</body>
</html>